{% extends "base.html" %}

{% block title %}CIDR Info
{% endblock %}
{% block page_title %}CIDR Info
{% endblock %}

{% block content %}

  <div class="row">
    <div class="col">
      <p class="fs-6">
        Get information about a CIDR block
      </p>
    </div>
  </div>

  <form method="post">
    {{ form.csrf_token }}
    <div class="row">
      <div class="col">
        {{ form.network.label(class="form-label") }}
        {% if form.network.errors %}
          {{ form.network(class="form-control is-invalid") }}
          <div class="invalid-feedback">
            {% for error in form.network.errors %}
              {{ error }}
            {% endfor %}
          </div>
        {% else %}
          {{ form.network(class="form-control") }}
        {% endif %}
      </div>
    </div>
    <div class="row mt-3">
      <div class="col">
        {{ form.submit(class="btn btn-primary") }}
      </div>
    </div>
  </form>

  {% if results %}
    <div class="row mt-4">
      <div class="col">
        <table class="table table-hover table-bordered">
          <tbody>
            <tr>
              <td colspan="4" class="table-light text-center fw-bold">{{results.cidr}}</td>
            </tr>
            <tr>
              <td class="table-light">IP Version</td>
              <td>IPv{{results.version}}</td>
              <td class="table-light">Total Addresses</td>
              <td>{{results.total_ips}}</td>
            </tr>
            {% if results.version == 4 and results.total_ips >= 4 %}
              <tr>
                <td class="table-light">Network Address</td>
                <td>{{results.network_addr}}</td>
                <td class="table-light">Broadcast Address</td>
                <td>{{results.broadcast_addr}}</td>
              </tr>
            {% endif %}
            <tr>
              <td class="table-light">First Usable</td>
              <td>{{results.first}}</td>
              <td class="table-light">Last Usable</td>
              <td>{{results.last}}</td>
            </tr>
            <tr>
              <td class="table-light">Network Mask</td>
              <td>{{results.network_mask}}</td>
              <td class="table-light">Host/Wildcard Mask</td>
              <td>{{results.host_mask}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  {% endif %}

{% endblock content %}
